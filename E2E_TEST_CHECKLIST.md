# E2Eテスト手動確認チェックリスト

## Chrome動作確認

### 1. ページ翻訳
- [ ] Wikipedia等のページを開く
- [ ] Alt+W押下でページ全体が翻訳される
- [ ] Popupの「Translate Page」ボタンで翻訳される
- [ ] 「Reset to Original」ボタンで元に戻る

### 2. 選択翻訳
- [ ] テキストを選択
- [ ] Alt+Y押下
- [ ] FloatingUIが表示される
- [ ] 翻訳結果が表示される

### 3. クリップボード翻訳
- [ ] テキストをコピー
- [ ] Alt+C押下
- [ ] 翻訳結果が表示される

### 4. 設定変更
- [ ] Options UIを開く
- [ ] API keyを設定
- [ ] 言語を変更 (例: English → Japanese)
- [ ] 接続テストを実行
- [ ] 「Connection successful」メッセージが表示される

### 5. UI確認
- [ ] Popup UIが正しく表示される
- [ ] Options UIが正しく表示される
- [ ] API key警告が適切に表示/非表示される
- [ ] ダークモードが動作する (OSダークモード時)

## Firefox動作確認

### 1. ページ翻訳
- [ ] Wikipedia等のページを開く
- [ ] Alt+W押下でページ全体が翻訳される
- [ ] Popupの「Translate Page」ボタンで翻訳される
- [ ] 「Reset to Original」ボタンで元に戻る

### 2. 選択翻訳
- [ ] テキストを選択
- [ ] Alt+Y押下
- [ ] FloatingUIが表示される
- [ ] 翻訳結果が表示される

### 3. クリップボード翻訳
- [ ] テキストをコピー
- [ ] Alt+C押下
- [ ] 翻訳結果が表示される

### 4. 設定変更
- [ ] Options UIを開く
- [ ] API keyを設定
- [ ] 言語を変更
- [ ] 接続テストを実行
- [ ] 成功メッセージが表示される

### 5. UI確認
- [ ] Popup UIが正しく表示される
- [ ] Options UIが正しく表示される
- [ ] Firefox特有のUI問題がない

## パフォーマンステスト

### 1. 大規模ページ翻訳
- [ ] 1000ノード以上のページを開く
- [ ] Alt+Wで翻訳開始
- [ ] 3秒以内に完了すること
- [ ] メモリリークがないこと (DevTools Memory確認)

### 2. キャッシュ動作
- [ ] 同じページを2回翻訳
- [ ] 2回目は即座に完了すること (キャッシュヒット)
- [ ] Chrome DevTools Networkで2回目のAPI呼び出しがないこと確認

### 3. 並行翻訳
- [ ] 複数タブで同時に翻訳
- [ ] 全タブが正常に翻訳されること
- [ ] 相互干渉がないこと

## エラーハンドリング

### 1. API keyエラー
- [ ] API keyを削除
- [ ] 翻訳を試行
- [ ] 適切なエラーメッセージが表示される

### 2. ネットワークエラー
- [ ] オフライン状態にする
- [ ] 翻訳を試行
- [ ] 適切なエラーメッセージが表示される
- [ ] オンライン復帰後、正常に動作する

### 3. 無効なAPI key
- [ ] 無効なAPI keyを設定
- [ ] 接続テストを実行
- [ ] 「API key invalid」エラーが表示される

## マイグレーション (v2→v3)

### 1. 既存v2ユーザー
- [ ] v2拡張機能をインストール
- [ ] API keyを設定 (v2の`apiKey`として)
- [ ] v3に更新
- [ ] マイグレーション通知が表示される
- [ ] `openRouterApiKey`に変換されている
- [ ] デフォルトモデルが設定されている
- [ ] 既存設定が保持されている

### 2. 新規インストール
- [ ] v3を新規インストール
- [ ] マイグレーション通知が表示されない
- [ ] デフォルト設定で動作する

## ブラウザ互換性

### Chrome
- [ ] Manifest V3として動作
- [ ] Service Workerが正常に起動
- [ ] Storage APIが動作
- [ ] Messaging APIが動作

### Firefox
- [ ] Manifest V2として動作
- [ ] Background pageが正常に起動
- [ ] Storage APIが動作
- [ ] Messaging APIが動作

## バンドルサイズ

- [ ] Chrome版: 1MB以下 (現在: 768KB ✓)
- [ ] Firefox版: 1MB以下 (現在: 764KB ✓)

## 完了基準

- [ ] 全Chromeテスト項目パス
- [ ] 全Firefoxテスト項目パス
- [ ] パフォーマンステストパス
- [ ] エラーハンドリング確認
- [ ] マイグレーション確認
- [ ] バンドルサイズ確認

---

## 注意事項

- テスト前に必ず最新ビルドを実行: `npm run build:all`
- DevToolsコンソールでエラーがないこと確認
- Storage内容を確認: Chrome DevTools → Application → Storage
