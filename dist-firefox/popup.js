(()=>{"use strict";var e,s={297:(e,s,a)=>{var r=a(848),t=a(540),n=a(338),o=(a(122),a(333)),l=a(724),i=a(444);function c(){const[e,s]=(0,t.useState)("idle"),[a,r]=(0,t.useState)(null),[n,c]=(0,t.useState)(0),d=new i.A;return{status:e,error:a,progress:n,translate:(0,t.useCallback)(async e=>{const a=(new Date).toISOString();console.log(`[Popup:useTranslation] ${a} - translate() called`,{targetLanguage:e});try{s("translating"),r(null),c(0);const t=e||await d.getTargetLanguage();console.log(`[Popup:useTranslation] ${a} - Target language resolved:`,t),console.log(`[Popup:useTranslation] ${a} - Sending TRANSLATE_PAGE message to background`,{type:l.G.TRANSLATE_PAGE,payload:{targetLanguage:t}});const n=await o.A.send({type:l.G.TRANSLATE_PAGE,payload:{targetLanguage:t}});if(console.log(`[Popup:useTranslation] ${a} - Received response from background:`,n),!0!==n?.success&&"completed"!==n?.status&&"started"!==n?.status)throw console.error(`[Popup:useTranslation] ${a} - Translation failed - unexpected response:`,n),new Error(n?.error||"Translation failed");console.log(`[Popup:useTranslation] ${a} - Translation successful`),s("success"),c(100)}catch(e){const t=e instanceof Error?e.message:"Unknown error";console.error(`[Popup:useTranslation] ${a} - Error during translation:`,{error:e,message:t,stack:e instanceof Error?e.stack:void 0}),s("error"),r(t),c(0)}},[]),reset:(0,t.useCallback)(async()=>{try{await o.A.send({type:l.G.RESET}),s("idle"),r(null),c(0)}catch(e){const s=e instanceof Error?e.message:"Unknown error";r(s)}},[])}}const d=t.memo(()=>{const{translate:e,reset:s,status:a}=c(),n=t.useCallback(async()=>{await e()},[e]),o=t.useCallback(async()=>{await s()},[s]),l="translating"===a,i="success"===a;return(0,r.jsxs)("div",{className:"quick-translate",children:[(0,r.jsx)("button",{onClick:n,disabled:l,className:"translate-button","aria-label":l?"Translating...":"Translate Page",children:l?"Translating...":"Translate Page"}),(0,r.jsx)("button",{onClick:o,disabled:!i,className:"reset-button","aria-label":"Reset to Original",children:"Reset to Original"})]})});var u=a(109);const g=()=>{const[e,s]=(0,t.useState)("en"),a=new i.A;return(0,t.useEffect)(()=>{(async()=>{const e=await a.getTargetLanguage();s(e)})()},[]),(0,r.jsxs)("div",{className:"language-selector",children:[(0,r.jsx)("label",{htmlFor:"target-language",children:"Target Language:"}),(0,r.jsx)("select",{id:"target-language",value:e,onChange:async e=>{const r=e.target.value;s(r),await a.setTargetLanguage(r)},"aria-label":"Select target language",children:u.Fc.map(e=>(0,r.jsx)("option",{value:e.code,children:e.name},e.code))})]})},p=t.memo(({status:e,progress:s,error:a})=>"idle"===e?null:(0,r.jsxs)("div",{className:`status-indicator ${e}`,"aria-live":"polite",role:"status",children:["translating"===e&&(0,r.jsxs)("div",{className:"translating-state",children:[(0,r.jsx)("div",{className:"status-message",children:"Translating..."}),(0,r.jsx)("div",{className:"progress-bar",role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,children:(0,r.jsx)("div",{className:"progress-fill",style:{width:`${s}%`}})}),(0,r.jsxs)("div",{className:"progress-text",children:[s,"%"]})]}),"success"===e&&(0,r.jsxs)("div",{className:"success-state success",children:[(0,r.jsx)("img",{src:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%234ade80' stroke-width='2'%3E%3Cpath d='M20 6L9 17l-5-5'/%3E%3C/svg%3E",alt:"success",role:"img","aria-label":"success"}),(0,r.jsx)("span",{children:"Translation successful!"})]}),"error"===e&&(0,r.jsxs)("div",{className:"error-state error",children:[(0,r.jsx)("img",{src:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23f87171' stroke-width='2'%3E%3Ccircle cx='12' cy='12' r='10'/%3E%3Cpath d='M15 9l-6 6M9 9l6 6'/%3E%3C/svg%3E",alt:"error",role:"img","aria-label":"error"}),(0,r.jsx)("span",{children:a||"Translation error occurred"})]})]})),h=({hasApiKey:e})=>e?null:(0,r.jsx)("div",{className:"api-key-warning warning",role:"alert",children:(0,r.jsxs)("div",{className:"warning-content",children:[(0,r.jsx)("div",{className:"warning-icon",children:"⚠️"}),(0,r.jsxs)("div",{className:"warning-message",children:[(0,r.jsx)("strong",{children:"API Key Required"}),(0,r.jsx)("p",{children:"Please configure your OpenRouter API key in Settings (⚙️)."})]})]})}),m=()=>{const[e,s]=(0,t.useState)(!1),{status:a,error:n,progress:o}=c(),l=(0,t.useMemo)(()=>new i.A,[]);return(0,t.useEffect)(()=>{(async()=>{const e=await l.getApiKey();s(!!e)})()},[l]),(0,r.jsxs)("div",{className:"popup-container",children:[(0,r.jsxs)("header",{className:"popup-header",children:[(0,r.jsx)("h1",{children:"Quick Translate"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("button",{onClick:()=>chrome?.runtime?.openOptionsPage(),style:{background:"none",border:"none",cursor:"pointer",fontSize:"20px",padding:"4px 8px",opacity:1,transition:"opacity 0.2s"},onMouseEnter:e=>e.currentTarget.style.opacity="0.7",onMouseLeave:e=>e.currentTarget.style.opacity="1","aria-label":"Open Settings",title:"Settings",children:"⚙️"}),(0,r.jsx)("div",{className:"extension-version",children:chrome?.runtime?.getManifest?.()?.version&&(0,r.jsxs)("span",{children:["v",chrome.runtime.getManifest().version]})})]})]}),(0,r.jsxs)("main",{className:"popup-main",children:[(0,r.jsx)(h,{hasApiKey:e}),(0,r.jsxs)("div",{className:"controls-section",children:[(0,r.jsx)(g,{}),(0,r.jsx)(d,{})]}),(0,r.jsx)(p,{status:a,progress:o,error:n})]}),(0,r.jsx)("footer",{className:"popup-footer",children:(0,r.jsx)("p",{className:"footer-text",children:"Powered by OpenRouter"})})]})};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("root");e?(0,n.H)(e).render((0,r.jsx)(t.StrictMode,{children:(0,r.jsx)(m,{})})):console.error("Root element not found")})}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,exports:{}};return s[e](n,n.exports,r),n.exports}r.m=s,e=[],r.O=(s,a,t,n)=>{if(!a){var o=1/0;for(d=0;d<e.length;d++){for(var[a,t,n]=e[d],l=!0,i=0;i<a.length;i++)(!1&n||o>=n)&&Object.keys(r.O).every(e=>r.O[e](a[i]))?a.splice(i--,1):(l=!1,n<o&&(o=n));if(l){e.splice(d--,1);var c=t();void 0!==c&&(s=c)}}return s}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,t,n]},r.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return r.d(s,{a:s}),s},r.d=(e,s)=>{for(var a in s)r.o(s,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})},r.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={887:0};r.O.j=s=>0===e[s];var s=(s,a)=>{var t,n,[o,l,i]=a,c=0;if(o.some(s=>0!==e[s])){for(t in l)r.o(l,t)&&(r.m[t]=l[t]);if(i)var d=i(r)}for(s&&s(a);c<o.length;c++)n=o[c],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},a=self.webpackChunkdoganaylab_api_translate=self.webpackChunkdoganaylab_api_translate||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))})(),r.nc=void 0;var t=r.O(void 0,[121,956],()=>r(297));t=r.O(t)})();