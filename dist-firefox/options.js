(()=>{"use strict";var e,r={783:(e,r,t)=>{var a=t(848),s=t(540),n=t(338),o=t(444),l=t(333),d=t(724);const i=({apiKey:e,model:r="",provider:t="",onChange:n,onModelChange:o,onProviderChange:l})=>{const[d,i]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null),g="api-key-error";return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"API Configuration"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"api-key",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"API Key"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:"api-key",type:d?"text":"password",value:e,onChange:e=>{const r=e.target.value;n(r),r&&c&&u(null)},onBlur:()=>{e&&""!==e.trim()?u(null):u("API key is required")},"aria-invalid":c?"true":"false","aria-describedby":c?g:void 0,className:`\n                w-full px-3 py-2 pr-20 border rounded-md\n                focus:outline-none focus:ring-2 focus:ring-blue-500\n                dark:bg-gray-800 dark:border-gray-700 dark:text-white\n                ${c?"border-red-500":"border-gray-300"}\n              `,placeholder:"Enter your OpenRouter API key"}),(0,a.jsx)("button",{type:"button",onClick:()=>{i(!d)},className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:d?"Hide":"Show"})]}),c&&(0,a.jsx)("p",{id:g,className:"mt-2 text-sm text-red-600 dark:text-red-400",children:c})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"openRouterModel",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"OpenRouterモデル名"}),(0,a.jsx)("input",{id:"openRouterModel",type:"text",value:r,onChange:e=>o?.(e.target.value),placeholder:"google/gemini-2.0-flash-exp:free","aria-label":"OpenRouterモデル名",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md\n                       focus:outline-none focus:ring-2 focus:ring-blue-500\n                       dark:bg-gray-800 dark:text-white"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"openRouterProvider",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"プロバイダ指定（オプション）"}),(0,a.jsx)("input",{id:"openRouterProvider",type:"text",value:t,onChange:e=>l?.(e.target.value),placeholder:"例: DeepInfra, Together, OpenAI","aria-label":"OpenRouterプロバイダ",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md\n                       focus:outline-none focus:ring-2 focus:ring-blue-500\n                       dark:bg-gray-800 dark:text-white"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"特定のプロバイダを優先したい場合に指定してください。空欄の場合は自動選択されます。"})]})]}),(0,a.jsx)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[(0,a.jsx)("strong",{children:"Security Notice:"})," Your API key is stored locally in your browser and is never shared with any third party. It is only used to make requests to the OpenRouter API."]})})]})};var c=t(109);const u=s.memo(({targetLanguage:e,fontSize:r,lineHeight:t,onChange:s})=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"target-language",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Language"}),(0,a.jsx)("select",{id:"target-language",value:e,onChange:e=>s("targetLanguage",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md\n                     focus:outline-none focus:ring-2 focus:ring-blue-500\n                     dark:bg-gray-800 dark:text-white",children:c.Fc.map(e=>(0,a.jsxs)("option",{value:e.code,children:[e.name," (",e.nameEn,")"]},e.code))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"font-size",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Font Size: ",r,"px"]}),(0,a.jsx)("input",{id:"font-size",type:"range",min:"12",max:"24",value:r,onChange:e=>s("fontSize",Number(e.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(0,a.jsx)("span",{children:"12px"}),(0,a.jsx)("span",{children:"24px"})]}),(0,a.jsxs)("div",{className:"mt-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-md",children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-xs mb-1",children:"Preview:"}),(0,a.jsx)("p",{style:{fontSize:`${r}px`},className:"text-gray-800 dark:text-gray-200",children:"The quick brown fox jumps over the lazy dog"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"line-height",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Line Height: ",t.toFixed(1)]}),(0,a.jsx)("input",{id:"line-height",type:"range",min:"1.0",max:"2.0",step:"0.1",value:t,onChange:e=>s("lineHeight",Number(e.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(0,a.jsx)("span",{children:"1.0"}),(0,a.jsx)("span",{children:"2.0"})]}),(0,a.jsxs)("div",{className:"mt-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-md",children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-xs mb-1",children:"Preview:"}),(0,a.jsxs)("p",{style:{lineHeight:t,fontSize:"14px"},className:"text-gray-800 dark:text-gray-200",children:["This is a sample text to demonstrate line height.",(0,a.jsx)("br",{}),"Multiple lines help visualize the spacing between lines.",(0,a.jsx)("br",{}),"Adjust the slider to see the effect."]})]})]})]})),g=({darkMode:e,onChange:r})=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Dark Mode"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Enable dark theme for the extension interface"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:e,onChange:e=>r("darkMode",e.target.checked),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4\n                       peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer\n                       dark:bg-gray-700 peer-checked:after:translate-x-full\n                       peer-checked:after:border-white after:content-[''] after:absolute\n                       after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300\n                       after:border after:rounded-full after:h-5 after:w-5 after:transition-all\n                       dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 border border-gray-300 dark:border-gray-700 rounded-md",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Theme Preview"}),(0,a.jsxs)("div",{className:"p-4 rounded-md "+(e?"bg-gray-900 text-white border border-gray-700":"bg-white text-gray-900 border border-gray-300"),children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Sample Content"}),(0,a.jsx)("p",{className:"text-sm",children:"This is how the extension interface will look with the selected theme."})]})]}),(0,a.jsx)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[(0,a.jsx)("strong",{children:"Note:"})," More theme customization options coming soon!"]})})]}),x=({onTest:e,testing:r})=>{const[t,n]=(0,s.useState)(null);return s.useEffect(()=>{r&&n(null)},[r]),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Connection Test"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Verify your API connection and check response time"}),(0,a.jsx)("button",{onClick:async()=>{try{n(null);const r=await e();n(r)}catch(e){const r=e instanceof Error?e.message:"Unknown error";n({success:!1,error:r})}},disabled:r,className:`\n            px-4 py-2 rounded-md font-medium transition-all\n            ${r?"bg-gray-400 text-gray-700 cursor-not-allowed opacity-50":"bg-blue-600 hover:bg-blue-700 text-white"}\n            focus:outline-none focus:ring-2 focus:ring-blue-500\n          `,children:r?"Testing...":"Test Connection"}),r&&(0,a.jsx)("div",{role:"status",className:"inline-block ml-3",children:(0,a.jsx)("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"⟳ 接続テスト中..."})})]}),!r&&t&&(0,a.jsx)("div",{role:"status",className:`\n            p-4 rounded-md border\n            ${t.success?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"}\n          `,children:t.success?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-green-800 dark:text-green-200",children:"✓ Connection Successful"}),void 0!==t.responseTime&&(0,a.jsxs)("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:["Response time: ",t.responseTime," ms"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-red-800 dark:text-red-200",children:"✗ Connection Failed"}),(0,a.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:t.error||"Unknown error occurred"})]})})]})};t(122);const m=document.getElementById("root");if(!m)throw new Error("Root element not found");(0,n.H)(m).render((0,a.jsx)(s.StrictMode,{children:(0,a.jsx)(()=>{const{settings:e,loading:r,saving:t,testing:n,error:c,updateSettings:m,saveSettings:b,testConnection:p}=function(){const[e,r]=(0,s.useState)({}),[t,a]=(0,s.useState)(!0),[n,i]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),[g,x]=(0,s.useState)(null),m=(0,s.useMemo)(()=>new o.A,[]);(0,s.useEffect)(()=>{(async()=>{try{a(!0);const e=await m.get();r(e),x(null)}catch(e){const r=e instanceof Error?e.message:"Unknown error";x("Failed to load settings"),console.error("Failed to load settings:",r)}finally{a(!1)}})()},[]);const b=(0,s.useCallback)((e,t)=>{r(r=>({...r,[e]:t}))},[]),p=(0,s.useCallback)(async()=>{try{i(!0),console.log("[useSettings] Saving settings:",e),await m.set(e);const r=await m.get(["openRouterApiKey","openRouterModel","openRouterProvider"]);console.log("[useSettings] Verification after save:",r),console.log("[useSettings] Saved openRouterApiKey:",r.openRouterApiKey),console.log("[useSettings] Saved openRouterModel:",r.openRouterModel),x(null)}catch(e){throw e instanceof Error&&e.message,x("Failed to save settings"),e}finally{i(!1)}},[e]),h=(0,s.useCallback)(async()=>{try{u(!0);const r=Date.now(),t=await l.A.send({type:d.G.TEST_CONNECTION,action:"testConnection",payload:{apiKey:e.openRouterApiKey,model:e.openRouterModel,provider:e.openRouterProvider}}),a=Date.now()-r;return t.success&&t.data?{success:t.data.success,responseTime:t.data.responseTime||a,error:t.data.error}:{success:!1,error:t.error||"Connection failed"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}finally{u(!1)}},[e]);return{settings:e,loading:t,saving:n,testing:c,error:g,updateSettings:b,saveSettings:p,testConnection:h}}(),[h,y]=(0,s.useState)("api"),[f,k]=(0,s.useState)(null);return r?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{role:"status",className:"text-center",children:[(0,a.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-600 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading settings..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,a.jsxs)("header",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Translation Settings"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure your translation preferences and API settings"})]}),c&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:(0,a.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:c})}),f&&(0,a.jsx)("div",{className:"mb-6 p-4 rounded-md border "+("success"===f.type?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"),children:(0,a.jsx)("p",{className:"text-sm "+("success"===f.type?"text-green-800 dark:text-green-200":"text-red-800 dark:text-red-200"),children:f.text})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[(0,a.jsxs)("div",{role:"tablist",className:"flex border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("button",{role:"tab","aria-selected":"api"===h,"aria-controls":"tab-panel-api",onClick:()=>y("api"),className:"px-6 py-3 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500\n                "+("api"===h?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:"API Settings"}),(0,a.jsx)("button",{role:"tab","aria-selected":"translation"===h,"aria-controls":"tab-panel-translation",onClick:()=>y("translation"),className:"px-6 py-3 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500\n                "+("translation"===h?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:"Translation"}),(0,a.jsx)("button",{role:"tab","aria-selected":"appearance"===h,"aria-controls":"tab-panel-appearance",onClick:()=>y("appearance"),className:"px-6 py-3 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500\n                "+("appearance"===h?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:"Appearance"})]}),(0,a.jsxs)("div",{className:"p-6",children:["api"===h&&(0,a.jsxs)("div",{role:"tabpanel",id:"tab-panel-api","aria-labelledby":"tab-api",className:"space-y-6",children:[(0,a.jsx)(i,{apiKey:e.openRouterApiKey??"",model:e.openRouterModel??"",provider:e.openRouterProvider??"",onChange:e=>m("openRouterApiKey",e),onModelChange:e=>m("openRouterModel",e),onProviderChange:e=>m("openRouterProvider",e)}),(0,a.jsx)(x,{onTest:p,testing:n})]}),"translation"===h&&(0,a.jsx)("div",{role:"tabpanel",id:"tab-panel-translation","aria-labelledby":"tab-translation",children:(0,a.jsx)(u,{targetLanguage:e.targetLanguage??"en",fontSize:e.fontSize??16,lineHeight:e.lineHeight??1.5,onChange:(e,r)=>m(e,r)})}),"appearance"===h&&(0,a.jsx)("div",{role:"tabpanel",id:"tab-panel-appearance","aria-labelledby":"tab-appearance",children:(0,a.jsx)(g,{darkMode:e.darkMode??!1,onChange:(e,r)=>{m(e,r)}})})]})]}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)("button",{onClick:async()=>{try{await b(),k({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>k(null),3e3)}catch(e){const r=e instanceof Error?`Failed to save settings: ${e.message}`:"Failed to save settings";console.error("Settings save error:",e),k({type:"error",text:r}),setTimeout(()=>k(null),5e3)}},disabled:t,className:`\n              px-6 py-3 rounded-md font-medium text-white\n              ${t?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}\n              disabled:opacity-50 disabled:cursor-not-allowed\n              focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\n            `,children:t?"Saving...":"Save Settings"})})]})})},{})}))}},t={};function a(e){var s=t[e];if(void 0!==s)return s.exports;var n=t[e]={id:e,exports:{}};return r[e](n,n.exports,a),n.exports}a.m=r,e=[],a.O=(r,t,s,n)=>{if(!t){var o=1/0;for(c=0;c<e.length;c++){for(var[t,s,n]=e[c],l=!0,d=0;d<t.length;d++)(!1&n||o>=n)&&Object.keys(a.O).every(e=>a.O[e](t[d]))?t.splice(d--,1):(l=!1,n<o&&(o=n));if(l){e.splice(c--,1);var i=s();void 0!==i&&(r=i)}}return r}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[t,s,n]},a.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return a.d(r,{a:r}),r},a.d=(e,r)=>{for(var t in r)a.o(r,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},a.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={575:0};a.O.j=r=>0===e[r];var r=(r,t)=>{var s,n,[o,l,d]=t,i=0;if(o.some(r=>0!==e[r])){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(d)var c=d(a)}for(r&&r(t);i<o.length;i++)n=o[i],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},t=self.webpackChunkdoganaylab_api_translate=self.webpackChunkdoganaylab_api_translate||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})(),a.nc=void 0;var s=a.O(void 0,[121,956],()=>a(783));s=a.O(s)})();